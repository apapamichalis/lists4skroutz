<div class="container">
  <div class="row">
    <div class="col-xs-4 col-md-4">
      <h1>My Lists</h1>

      <%= form_tag user_lists_path, method: 'get', class: 'lists-search' do %>
          <%= text_field_tag :search, params[:search], placeholder: "Find list" %>
          <%= submit_tag "Search" %>
      <% end %>

      <table class="table table-hover table-stripped">
        <thead>
          <tr>
            <th colspan="10"></th>
          </tr>
          <tr>
            <th> List Name</th>
            <th> Status</th>
            <th> Likes</th>
            <th> <%= sortable 'created_at', 'Created at' %></th> 
          </tr>
        </thead>

        <tbody>
          <% @lists.each do |list| %>
            <tr>
              <td><%= list.name %> </td>
              <td><%= list.active ? "active": "inacative" %> </td>
              <td><%= list.votes_count || 0 %> </td>
              <td><%= list.created_at %> </td>
              <td><%= link_to 'Show', user_list_path(id: list.id) %></td>
              <td><%= link_to 'Edit', edit_user_list_path(id: list.id) if list.user == current_user %></td>
              <td>
                <% if current_user.likes?(list) %>
                  <%= link_to 'Unlike', user_list_vote_path(list_id: list.id), method: :delete %> 
                <% end %>
              </td>
              <td>
                <% if !current_user.likes?(list) %>
                  <%= link_to 'Like', user_list_vote_path(list_id: list.id), method: :post%>
                <% end %> 
              </td>
              <td><%= link_to 'Delete', user_list_path(id: list.id), method: :delete, data: { confirm: 'Are you sure?' } if list.user == current_user%></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <br>

<%= link_to 'New List', new_user_list_path %>
</div>


